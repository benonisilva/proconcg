<ion-view view-title="Denúncia ProCon Campina Grande" ng-controller="DenunciaCtrl">
  <ion-content class="padding">
    <div class="row">
      <form name="formUser" novalidate on-valid-submit="cadastraUser(user)"> 
        
        <div class="list card">

          <div class="item item-divider">Dados Do Consumidor</div> 

          <label class="item item-input item-floating-label">
            <span class="input-label">*Nome Completo</span>
            <input type="text" class="form-control" ng-model="user.name" placeholder="Nome Completo" required >
            <i class="icon ion-alert-circled error"></i>
          </label>
          
          <label class="item item-input item-floating-label">
            <span class="input-label">*Email</span>
            <input type="text" ng-model="user.email" ng-pattern="/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i" placeholder="seuemail@provedor.com" required >
            <i class="icon ion-alert-circled error"></i>
          </label>

          <label class="item item-input item-floating-label">
            <span class="input-label">*Telefone</span>
            <input type="text" ng-model="user.telefone" placeholder="Telefone para contato" ui-br-phone-number required >
            <i class="icon ion-alert-circled error"></i>
          </label>

          <div class="col-100">
            
            <div ng-switch on="user.tipoDocumento">

              <div class="item item-input" ng-switch-when=2>
                <label class="item-input-wrapper">
                  <input placeholder="CPF" type="text" ng-model="user.nDocumento" ui-br-cpf-mask>
                  <span class="input-label">CPF</span>
                </label>
              </div>
              
              <div class="item item-input" ng-switch-when=1>
                <label class="item-input-wrapper">
                  <input placeholder="CNPJ" type="text" ng-model="user.nDocumento" ui-br-cnpj-mask>
                  <span  class="input-label">CNPJ</span>
                </label>
              </div>

              <div class="item item-input" ng-switch-when="undefined">
                <label class="item-input-wrapper">
                  <input placeholder="Escolha o tipo de documento" type="text" ng-model="user.nDocumento" ui-br-cnpj-mask>
                  <span class="input-label">Tipo</span>
                </label>
              </div>

              <div class="item item-input">
                <select  ng-model="user.tipoDocumento"  required >
                  <option value="">Tipo de Documento</option>
                  <option value="2">CPF</option>
                  <option value="1">CNPJ</option>
                </select>
              </div>
        </div>

        <div class="list card">
          
          <div class="item item-divider">
              Informações de Endereço
          </div>

          <div class="item item-input-inset">
            <label class="item-input-wrapper">
              <input type="text" ng-model="user.cep" placeholder="CEP" ui-br-cep-mask required>
            </label>
            <button type="button" ng-click="onClickBuscar(user.cep)" class="button button-small" ng-disabled="(user.cep===undefined)">
              {{(user.cep===undefined) ? "Seu CEP" : "Buscar End."}}
            </button>
          </div>
          
         
          
          <div class="row">

            <div class="col col-75">
              <label class="item item-input item-stacked-label">
                <span class="input-label">Rua</span>
                <input ng-model="user.endereco.logradouro" placeholder="Logradouro" type="text" required>
              </label>
            </div>

            <div class="col col-25">
              <label class="item item-input item-stacked-label">
                <span class="input-label">Num.</span>
                <input ng-model="user.endereco.numero" type="text" placeholder="Num" maxlength="6">
              </label>
            </div> 

          </div>

          <div class="row">
              <div class="col col-50">
                <label class="item item-input item-stacked-label">
                <span class="input-label">Bairro</span>
                <input ng-model="user.endereco.bairro" disabled type="text">
              </label>
              </div>
              <div class="col col-50">
                <label class="item item-input item-stacked-label">
                  <span class="input-label">Complemento</span>
                  <input ng-model="user.endereco.complemento" placeholder="Complemento" type="text">
                </label>
              </div>
          </div>

           <div class="row">
              <div class="col col-70">
                <label class="item item-input item-stacked-label">
                <span class="input-label">Cidade</span>
                <input name="localidade" ng-model="user.endereco.localidade" disabled type="text">
              </label>
              </div>
              <div class="col col-30">
                <label class="item item-input item-stacked-label">
                  <span class="input-label">UF</span>
                  <input ng-model="user.endereco.uf" disabled type="text" maxlenght="3">
                </label>
              </div>
          </div>

         </div>

      <button type="submit" class="button button-block button-positive" ng-disabled="formUser.$invalid">
        {{!(formUser.$invalid) ? "Preencher Denuncia" : "Preencha todos os dados solicitados"}} 
      </button>         
      
      </form>
    </div>
  </ion-content>
</ion-view>